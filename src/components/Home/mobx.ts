// state
import { makeAutoObservable } from "mobx";
import { createContext, useContext } from "react";
import { SongResJson } from "../../scraping/SongMetadata";
import { SongMetrics } from "./SongInput";

/** # Main */
export class HomeStore {
  // ctor
  constructor() {
    makeAutoObservable(this, {}, { autoBind: true });
  }

  /////////////////////////////////////////////////////////
  ////////////////////// OBSERVABLES //////////////////////
  songMetrics = {} as SongMetrics;
  songMetadata = {} as SongResJson;
  ////////////////////// OBSERVABLES //////////////////////
  /////////////////////////////////////////////////////////

  /////////////////////////////////////////////////////////
  /////////////////////// COMPUTEDS ///////////////////////
  /////////////////////// COMPUTEDS ///////////////////////
  /////////////////////////////////////////////////////////

  /////////////////////////////////////////////////////////
  //////////////////////// ACTIONS ////////////////////////
  setSongMetrics(input: SongMetrics) {
    this.songMetrics = input;
  }
  setSongMetadata(input: SongResJson) {
    this.songMetadata = input;
  }
  //////////////////////// ACTIONS ////////////////////////
  /////////////////////////////////////////////////////////

  /////////////////////////////////////////////////////////
  //////////////////////// HELPERS ////////////////////////
  //////////////////////// HELPERS ////////////////////////
  /////////////////////////////////////////////////////////
}

// context
export const HomeContext = createContext<HomeStore>(new HomeStore());

// hook
export const useHomeContext: (callerFxn: (stores: HomeStore) => {}) => any = (
  callerFxn: (stores: HomeStore) => any
) => {
  const context = useContext(HomeContext) as HomeStore;

  return callerFxn(context);
};
